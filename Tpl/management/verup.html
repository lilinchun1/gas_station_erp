<!doctype html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>版本升级</title>
	<link rel="stylesheet" href="__PUBLIC__/css/configuration.css"/>
	<script type="text/javascript" src="__PUBLIC__/js/jquery-1.10.2.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/js/jquery.SuperSlide.2.1.1.js"></script>
	<script type="text/javascript" src="__PUBLIC__/js/My97DatePicker/WdatePicker.js"></script>


	<script type="text/javascript">
		$(function(){
			//================================================================默认动作

			//禁止浏览器自动填充
			$("form").attr( "autocomplete","off");
			//================================================================触发操作
			//创建，编辑弹出框
			$('.status_add,.status_udp').click(function(){
				if($(this).hasClass("status_udp")){
					var rule_status = $("input[name='role-info']:checked").parent().parent().find(".rule_status_list").val();
					if(rule_status >= 2){
						alert("不能编辑");
						return;
					}
					var rule_no = $("input[name='role-info']:checked").parent().parent().find(".rule_no_list").text();
					var start_time = $("input[name='role-info']:checked").parent().parent().find(".start_time_list").text();
					if(rule_no == ""){
						alert("请选择编辑条目");
						return;
					}
					$("#rule_no").val(rule_no);
					$("#start_time").val(start_time);
				}
				$.openDOMWindow({
					loader:1,
					loaderHeight:16,
					loaderWidth:17,
					windowSourceID:'#j_add_win'
				});
				return false;
			});


			//删除，发布，作废弹出框
			$(".status_del,.status_2,.status_3").click(function(){
				//获取状态值
				var rule_status = $("input[name='role-info']:checked").parent().parent().find(".rule_status_list").val();
				if($(this).hasClass("status_del")){
					var noSelMes = "请选择删除条目";
					//改变确认框内容
					$(".delete-message").text("确认删除？");
					$(".del_fb_zf").text("删除");
					$(".del_fb_zf").val("1");
					if(rule_status >= 2){
						alert("不能删除");
						return;
					}
				}else if($(this).hasClass("status_2")){
					var noSelMes = "请选择要发布条目";
					$(".delete-message").text("确认发布？");
					$(".del_fb_zf").text("发布");
					$(".del_fb_zf").val("2");
					if(rule_status != 1){
						alert("不能发布");
						return;
					}
				}

				var rule_no = $("input[name='role-info']:checked").parent().parent().find(".rule_no_list").text();
				if(rule_no == ""){
					alert(noSelMes);
					return;
				}
				$("#rule_no_hid").val(rule_no);

				//弹出页面
				$.openDOMWindow({
					loader:1,
					loaderHeight:16,
					loaderWidth:17,
					windowSourceID:'#j_del_win'
				});
				return false;
			});
			//点一行则选中
			$(".app_info_list").click(function(){
				$(this).find(".app_list_radio").attr("checked",true);
			});

		});
		//根据选择范围圈定应用名称下拉内容
		function getAppRule() {
			$.post("{:U('management/Index/getAppRule')}", {'sad':1}, function(data) {
				var str = data;
				//str = [{title:"中国移动网上营业厅"},{title:"中国银行"},{title:"中国移动"},{title:"中国好声音第三期"},{title:"中国好声音 第一期"},{title:"中国电信网上营业厅"},{title:"中国工商银行"},{title:"中国好声音第二期"},{title:"中国地图"}];
				$("#rule_no").bigAutocomplete({
					width : 150,
					data : str,
					callback : function(data) {
					}
				});
			}, "json");
		}
	</script>
</head>
<body>
<include file="./Tpl/include/pb-head.html"/>
<div id="container">
	<div class="left">
		<include file="./Tpl/include/pb-management-aside.html"/>
	</div>
	<div class="right">
		<div class="right-con">
			<div class="org-right-con">
				<div class="role-control" id="j-fixed-top">
					<div class="role-inquire channel-index-btns">
						<form action="" method="post">
							<p>
								<label for="channel-org-name" class="">SmartApp</label>
								<input type="text" name="smartApp" id="channel-org-name" class="input-org-info"/>
								<label for="maintain-create-people" class="">VideoPlayer</label>
								<input type="text" name="videoPlayer" id="maintain-create-people" class="input-org-info"/>
								<label for="maintain-create-date" class="">UpdateApp</label>
								<input type="text" name="updateApp" id="maintain-create-date" class="input-org-info"/>
								<label for="maintain-create-date" class="">SmartGuard</label>
								<input type="text" name="smartGuard" id="maintain-create-date" class="input-org-info"/>
								<button type="submit" name="select" class="role-control-btn">查询</button>
							</p>
						</form>
					</div>
					<div class="org-right-btns">
						<form action="">
							<button type="button" class="area-btn status_add">创建</button>
							<button type="button" class="area-btn status_udp">编辑</button>
							<button type="button" class="area-btn status_del">删除</button>
							<button type="button" class="area-btn status_2">更新</button>
						</form>
					</div>
				</div>
				<div class="role-table">
					<div class="bd over-h-y">
						<ul class="role-table-list">
							<li>
								<span class="span-1"></span>
								<span class="span-1"><b>SmartApp</b></span>
								<span class="span-1"><b>VideoPlayer</b></span>
								<span class="span-1"><b>UpdateApp</b></span>
								<span class="span-1"><b>SmartGuard</b></span>
								<span class="span-1"><b>发布渠道</b></span>
								<span class="span-1"><b>发布状态</b></span>
								<span class="span-2"><b>更新日期</b></span>
								<span class="span-1"><b>更新信息</b></span>
							</li>
							<foreach name="app_dev_update_arr" item="app_dev_update">
							<li class="app_info_list">
								<span class="span-1"><input type="radio" name="role-info" id="" class="app_list_radio" value="{$app_dev_update['id']}"/></span>
								<span class="span-1">{$app_dev_update['smart_app']}</span>
								<span class="span-1">{$app_dev_update['video_player']}</span>
								<span class="span-1">{$app_dev_update['update_app']}</span>
								<span class="span-1">{$app_dev_update['smart_guard']}</span>
								<span class="span-1"><a href="" class="fthover">发布渠道</a></span>
								<span class="span-1">
									<if condition="$app_dev_update['status'] eq 0">
										待更新
									<else />
										已更新
									</if>
								</span>
								<span class="span-2">{$app_dev_update['status_date']}</span>
								<span class="span-1"><a href="" class="fthover">更新信息</a></span>
							</li>
							</foreach>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<include file="./Tpl/include/pb-foot.html"/>
<!--创建弹出框-->
<div class="alert-org-add" id="j_add_win" style=" display:none;">
	<div class="verup-alert-add">
		<form action="" method="post">
			<h3>版本信息</h3>
			<div class="verup-alert-con">
				<div class="verup-alert-con-left">
					<p>
						<label for="main-pg">SmartApp</label>
						<input type="text" name="SmartApp" id="main-pg" class="input-org-info"/>
						<button class="role-control-btn">浏览</button>
					</p>
					<p>
						<label for="main-pg">VideoPlayer</label>
						<input type="text" name="VideoPlayer" id="main-pg" class="input-org-info"/>
						<button class="role-control-btn">浏览</button>
					</p>
					<p>
						<label for="main-pg">UpdateApp</label>
						<input type="text" name="UpdateApp" id="main-pg" class="input-org-info"/>
						<button class="role-control-btn">浏览</button>
					</p>
					<p>
						<label for="main-pg">SmartGuard</label>
						<input type="text" name="SmartGuard" id="main-pg" class="input-org-info"/>
						<button class="role-control-btn">浏览</button>
					</p>
				</div>
				<div class="verup-alert-con-right">
					<p>发布渠道</p>
					<div class="verup-tree-tab">
						<a href="" class="active">所属区域</a>
						<a href="">渠道类型</a>
					</div>
				</div>
				<div class="alt-btn-sc cf">
					<button type="submit" name="add_udp" class="alert-btn4" value="1">保存</button>
					<a href="." class="closeDOMWindow">
						<button type="button" class="alert-btn">关闭</button>
					</a>
				</div>
			</div>
		</form>
	</div>
</div>
<!--删除确认框-->
<div class="divout" id="j_del_win" style="display:none;">
	<div class="alert-role-add" >
		<form action="" method="post">
			<h3>期刊</h3>
			<div class="alert-role-add-con">
				<p class="delete-message">确认删除？</p>
				<p>
					<input type="hidden" name="rule_no_hid" id="rule_no_hid" value=""/>
					<button type="submit" name="del_fb_zf" class="alert-btn2 del_fb_zf" id="j_del_ok" value="1">删除</button>
					<a href="." class="closeDOMWindow">
						<button type="button" class="alert-btn2">关闭</button>
					</a>
				</p>
			</div>
		</form>
	</div>
</div>
<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/jquery.bigautocomplete.css"/>
<script type="text/javascript" src="__PUBLIC__/js/jquery.bigautocomplete.js"></script>
<script type="text/javascript">
	getAppRule();
	$(function(){
		$('.gengxin-up a:eq(0)').click(function () {
			$('#j-station-sh1').show();
			$('#j-station-sh2').hide();
			$(this).addClass('active');
			$('.gengxin-up a:eq(1)').removeClass();
			return false;
		});
		$('.gengxin-up a:eq(1)').click(function () {
			$('#j-station-sh1').hide();
			$('#j-station-sh2').show();
			$(this).addClass('active');
			$('.gengxin-up a:eq(0)').removeClass();
			return false;
		});
	})
</script>
</body>
</html>